class: center, middle, inverse, title-slide

# Software packaging for researchers:

## When, why & how?

Will Furnass - SSI Fellowship application - 2020

<img src="/images/profile.jpg" alt="Will Furnass profile" width="70%" />

[https://willfurnass.github.io/ssi-fellow-app-2020](willfurnass.github.io/ssi-fellow-app-2020)

---

<img src="/images/rse-shef-twitter.png" alt="RSE Sheffield logo" style="float: right; width: 30%;" />

## Now: Research Software Engineer (RSE)

At the University of Sheffield (TUOS) (3y; now deputy RSE team lead)

--
 1. **Collaborative research software and infrastructure projects**

--
 1. **Code Clinic** (surgery)

--
 1. Develop/deliver **training** and organise **events**
    * Carpentries; bespoke training.

--
 1. Engagement with regional/national **communities**: RSE Society, UK RSE conference, RSE Leaders' network, N8 CIR, SSI

--
 1. **Dissemination**: regularly write posts for team's blog

---
### Previously:

  - Research Computing support (0.5y)
      - *Empathy*, *effective communication*, *abstraction*

--

  - MSc, PhD and post-doc in Water Engineering (4.5y)
      - *Numerical modelling*, *academic pressures*, *research lifecycle*

--

  - Hydraulic engineer (0.5y)
      - *Best practices*

--

  - Film/TV industry IT engineer (3y)
      - *Similar challenges to Research Computing support!*

--

  - Computer Science BSc
      - *Technical foundation*

---
## Plans for the Fellowship

Robin the researcher:

> So thanks to the Carpentries I can now use Git/GitHub for Version Control and do some testing.
> But how should I _structure_ my code as it evolves to 
> * make parts reusable? 
> * make version control and testing easier?

--

<br />
Lack of guidance around how to **structure code** as grows larger

  * No separation of reusable components from analysis notebooks/scripts

---
### Aim: increase understanding of *why*, *when* and *how* of software packaging

* **Packaging up reusable components** should help;
    * Separate linear analysis/narrative from implementation of core functionality
    * Easier to implemnent testing, autogenerated docs, sensible versioning

--

<div style="margin: auto; padding: 10px;">
<pre class="code" style="line-height: 1.0em; font-size: 1.2em;">
my_pkg1/         my_pkg2/        analysis6/
|                |               |
├── src/         ├── src/        ├── notebook.ipynb
├── tests/       ├── tests/      └── deps/
├── docs/        ├── docs/       
├── version/     ├── version/    
└── deps/        └── deps/       

---
<img src="/images/brainstorm.jpg" alt="Brainstorming" style="float: right; width: 30%;" />

### Activity 1: RSE discussion workshop (0.5d)

 1. Common challenges as code evolves (inc. public vs private)
 1. How to introduce researchers to packaging?
 1. How best to separate a workflow into
      * package repositories + 
      * analysis repositories + 
      * data repositories?
 1. How to robustly link them as a reproducible workflow?
 1. 'Report card' tooling? (e.g. *Go Report Card*)

--

Advertise via SSI, UK RSE and N8 CIR.

Collaborations Workshop 2020?

---
### Activities 2 & 3: R & Python packaging workshops (1d each)

<img src="/images/Rlogo.svg" alt="R logo" style="float: right; clear: right; width: 20%;" />
<img src="/images/pypkg.png" alt="Python package" style="float: right; clear: right; width: 20%;" />

* Motivation for creating packages
* How and when to migrate existing code to package
* Handling dependencies
* Package repositories
* Versioning

--

<img src="/images/pytest.png" alt="pytest logo" style="float: left; clear: left; width: 15%; padding-right: 2em;" />
<img src="/images/sphinx.png" alt="sphinx logo" style="float: left; clear: left; width: 15%; padding-right: 2em;" />

* Incorporating test suites and auto-generating docs (basics)
* CI for testing and documentation (basics)

* Checklists!

---
### Activity 4: auditing packages for PIs

<img src="/images/checklist.jpg" alt="checklist" style="float: right; width: 50%;" />

* Motivation
* Tools/concepts/language
* Needs to also cover basics of version control
* Checklists
* Signposts to training for researchers

---
## Outputs

<img src="/images/dog.gif" alt="RSE Sheffield logo" style="float: right; width: 40%;" />

* Open materials from R, Python and PI workshops 
    * allows TUOS and others to re-run

--

* Reflective SSI blog post (possibly paper) from workshop for RSEs
    * To prompt discussions at a larger scale

--

* Introductory material for Reprohacks
    * How to evaluate software quality
